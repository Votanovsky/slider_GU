<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geisha</title>
    <link rel="stylesheet" href="style.css">

    
</head>
<body>
    <main>
        <section style="width: 100vw; height: 500vh; background: cyan; z-index: 100;"></section>
        <div class="slider">
            <canvas class="dom-gl"></canvas>
            <div class="slider__image--wrapper">
                <img class="slider__image slider__image--1" src="1.png" alt="image 01" />
                <img class="slider__image slider__image--2" src="2.png" alt="image 02" />
                <img class="slider__image slider__image--3" src="3.png" alt="image 03" />
                <img class="slider__image slider__image--4" src="4.jpg" alt="image 04" />
            </div>
            <div class="slider__slide-info--wrapper">
                <div class="slider__silde-info slide--current">
                    <h2 class="slide__index" data-splitting>01</h2>
                    <div class="slide__text--wrapper">
                        <h2 class="slide__text slide__text--title" data-splitting>Юбки</h2>
                        <p class="slide__text slide__text--description">
                            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptate, accusamus aperiam harum accusantium error tempora dicta quidem in provident laborum?
                        </p>
                    </div>
                </div>
                <div class="slider__silde-info">
                    <h2 class="slide__index" data-splitting>02</h2>
                    <div class="slide__text--wrapper">
                        <h2 class="slide__text slide__text--title" data-splitting>Трусы</h2>
                        <p class="slide__text slide__text--description">
                            In this modern world it is easy to be complex but difficult to be simple. At least try to keep your mind
                            simple.
                        </p>
                    </div>
                </div>
                <div class="slider__silde-info">
                    <h2 class="slide__index" data-splitting>03</h2>
                    <div class="slide__text--wrapper">
                        <h2 class="slide__text slide__text--title" data-splitting>Бюстгальтеры</h2>
                        <p class="slide__text slide__text--description">
                            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptate, accusamus aperiam harum accusantium error tempora dicta quidem in provident laborum?
                        </p>
                    </div>
                </div>
                <div class="slider__silde-info">
                    <h2 class="slide__index" data-splitting>04</h2>
                    <div class="slide__text--wrapper">
                        <h2 class="slide__text slide__text--title" data-splitting>Корсеты</h2>
                        <p class="slide__text slide__text--description">
                            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptate, accusamus aperiam harum accusantium error tempora dicta quidem in provident laborum?
                        </p>
                    </div>
                </div>
            </div>
            <nav class="slider__nav--wrapper">
                <button class="slider__nav slider__nav--prev">
                    <svg width="51" height="9" viewBox="0 0 51 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <line y1="-1" x2="49.9704" y2="-1" transform="matrix(-1 0 0 1 50.0371 2)" stroke="white" stroke-width="2"/>
                        <line y1="-1" x2="19.9882" y2="-1" transform="matrix(-0.936672 -0.350207 -0.350207 0.936672 18.7227 9)" stroke="white" stroke-width="2"/>
                    </svg>
                </button>
                <button class="slider__nav slider__nav--next">
                    <svg width="51" height="9" viewBox="0 0 51 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <line y1="1" x2="49.9704" y2="1" stroke="white" stroke-width="2"/>
                        <line x1="30.9642" y1="8.06333" x2="49.6866" y2="1.06333" stroke="white" stroke-width="2"/>
                    </svg>
                </button>
            </nav>
        </div>
        
        <section style="width: 100vw; height: 100vh; background: cyan; z-index: 100;"></section>
    </main>
    
    <!-- this effect is taken from -- https://codepen.io/sandstedt/pen/GRZeywP?editors=0100 -->
    
    
    <!-- //////// SHADER CODE //////// -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
    <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tiny-emitter@2.1.0/index.min.js"></script>
    <script id="vertexShader" type="x-shader/x-vertex">
        precision mediump float;
    
        varying vec2 vUv;
        varying float vWave;
    
        uniform float uTime;
        uniform float uAmplitude;
        uniform float uProgDirection;
        uniform float uMouseOverAmp;
        uniform float uRadius;
    
        uniform vec2 uMeshSize;
        uniform vec2 uMousePos;
    
        uniform bool uAnimating;
        uniform bool uTranslating;
    
        float mapVal(in float n,in float start1,in float stop1,in float start2,in float stop2){
                return((n-start1)/(stop1-start1))*(stop2-start2)+start2;
        }
    
        void main(){
                vec3 pos=position;
                vUv=uv;
    
                vec2 center=vUv-uMousePos;
                center.x*=uMeshSize.x/uMeshSize.y;
                float dist=length(center);
    
                float radius=uRadius;
    
                float mask=smoothstep(radius,radius*5.,dist);
                float d=mapVal(mask,-1.,1.,-1.,0.);
    
                if(uAnimating){
                        pos.z=sin(pos.x*5.+uTime*10.*uProgDirection)*uAmplitude;
                        pos.z*=2.5;
                }else{
                        pos.z=d*uMouseOverAmp;
                        pos.z*=15.;
                }
    
                if(uTranslating){
                        pos.z=sin(pos.y*6.+uTime*10.)*uAmplitude;
                        pos.z*=3.5;
                }
    
                vWave=pos.z;
    
                gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);
        }
    </script>
    
    <script id="fragmentShader" type="x-shader/x-fragment">
        precision mediump float;
    
        varying vec2 vUv;
        varying float vWave;
    
        uniform float uTime;
        uniform float uProg;
        uniform float uProgDirection;
    
        uniform sampler2D uCurrTex;
        uniform sampler2D uNextTex;
    
        uniform vec2 uMeshSize;
        uniform vec2 uImageSize;
    
        vec2 backgroundCoverUv(vec2 uv,vec2 canvasSize,vec2 textureSize){
                vec2 ratio=vec2(
                        min((canvasSize.x/canvasSize.y)/(textureSize.x/textureSize.y),1.),
                        min((canvasSize.y/canvasSize.x)/(textureSize.y/textureSize.x),1.)
                );
    
                vec2 uvWithRatio=uv*ratio;
    
                return vec2(
                        uvWithRatio.x+(1.-ratio.x)*.5,
                        uvWithRatio.y+(1.-ratio.y)*.5
                );
        }
    
        void main(){
                vec2 texUv=backgroundCoverUv(vUv,uMeshSize,uImageSize);
    
                float x=uProg;
                float y;
                if(uProgDirection==1.)y=(x*2.+(vUv.x-1.));
                else y=((x*2.)-vUv.x);
                x=smoothstep(0.,1.,y);
    
                float w=vWave;
    
                float r1=texture2D(uCurrTex,texUv+w*.04).r;
                float g1=texture2D(uCurrTex,texUv+w*.01).g;
                float b1=texture2D(uCurrTex,texUv+w*-.03).b;
                vec3 tex1=vec3(r1,g1,b1);
    
                float r2=texture2D(uNextTex,texUv+w*.04).r;
                float g2=texture2D(uNextTex,texUv+w*.01).g;
                float b2=texture2D(uNextTex,texUv+w*-.03).b;
                vec3 tex2=vec3(r2,g2,b2);
    
                float scaleUp=(.4+.6*(1.-uProg));
                float scaleDown=(.6+.4*uProg);
    
                vec4 f1=mix(
                        texture2D(uCurrTex,texUv*(1.-x)*scaleUp+vec2(.15)*uProg),
                        texture2D(uNextTex,texUv*x*scaleDown),
                x);
    
                vec3 f2=mix(tex1,tex2,x);
    
                vec4 final=mix(f1,vec4(f2,1.),.12);
    
                gl_FragColor=final;			
        }
    </script>

    <script src="index.js"></script>
</body>
</html>